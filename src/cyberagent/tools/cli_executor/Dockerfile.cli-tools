# CyberneticAgents Docker image for CLI-based agent skills.
FROM node:22-slim

RUN apt-get update && apt-get install -y --no-install-recommends \
    ca-certificates \
    curl \
    git \
    jq \
    less \
    python3 \
    python3-pip \
    ripgrep \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /app

# Install Brave search CLI from upstream repository.
RUN python3 -m pip install --no-cache-dir \
    git+https://github.com/joshsisto/brave-search-cli.git

# Readability-based web fetch helper exposed as a CLI.
RUN python3 -m pip install --no-cache-dir \
    requests \
    git+https://github.com/buriy/python-readability.git
COPY src/cyberagent/tools/cli_executor/web_fetch.py /usr/local/bin/web-fetch
RUN chmod +x /usr/local/bin/web-fetch

# Read-only git sync helper exposed as a CLI.
COPY src/cyberagent/tools/cli_executor/git_readonly_sync.py /usr/local/bin/git-readonly-sync
RUN chmod +x /usr/local/bin/git-readonly-sync

RUN git --version && rg --version

CMD ["bash"]
